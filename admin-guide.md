# راهنمای مدیریت سایت طب‌نما

## ساختار فایل‌ها

سایت طب‌نما دارای دو نوع فایل اصلی است:

1. **فایل‌های پست** (در پوشه `_posts`): اطلاعات پایه درباره پزشکان، کلینیک‌ها، داروها و تجهیزات پزشکی
2. **فایل‌های داده** (در پوشه `_data/review`): تجربیات کاربران درباره این مراکز و خدمات

## اضافه کردن مطالب جدید

### 1. اضافه کردن یک پزشک، کلینیک یا دارو جدید

برای اضافه کردن یک مورد جدید:

1. یک فایل جدید با فرمت `YYYY-MM-DD-نام-مورد.md` در پوشه `_posts` ایجاد کنید
2. از ساختار زیر استفاده کنید:

```yaml
---
title: نام پزشک/کلینیک/دارو
company_slug: نام-پزشک-کلینیک-دارو (با خط تیره به جای فاصله)
site: آدرس وب‌سایت (در صورت وجود)
industry: حوزه فعالیت (پزشکی عمومی، دندانپزشکی، داروسازی، تجهیزات پزشکی و ...)
size: اندازه (برای کلینیک‌ها: کوچک، متوسط، بزرگ)
city: شهر
cover: لینک تصویر (در صورت وجود)
---

توضیحات درباره پزشک/کلینیک/دارو...
```

### 2. اضافه کردن تجربه کاربری

برای اضافه کردن یک تجربه کاربری:

1. یک فایل جدید با فرمت `entry[عدد_تصادفی].yml` در پوشه `_data/review/[company_slug]` ایجاد کنید
2. از ساختار زیر استفاده کنید:

```yaml
_id: [شناسه یکتا]
email: [ایمیل کاربر (به صورت hash شده)]
job_name: "[عنوان شغلی کاربر]"
rate: [امتیاز بین 1 تا 5]
state: [وضعیت (تمام وقت، پاره وقت، ...)]
agent: "[اطلاعات مرورگر کاربر]"
description: |
  [شرح تجربه کاربر]
pros: "[مزایا (جدا شده با کاما)]"
cons: "[معایب (جدا شده با کاما)]"
date: [تاریخ ثبت به صورت timestamp]
```

## نمونه‌ها

### نمونه فایل پست برای یک پزشک:

```markdown
---
title: دکتر مریم رضوی
company_slug: دکتر-مریم-رضوی
site: 
industry: متخصص زنان و زایمان
size: 
city: تهران
cover: 
---

دکتر مریم رضوی یکی از متخصصان زنان و زایمان با سابقه طولانی در تهران است...
```

### نمونه فایل داده برای یک تجربه:

```yaml
_id: a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8
email: 5f4dcc3b5aa765d61d8327deb882cf99
job_name: "بیمار"
rate: 4.5
state: "نامشخص"
agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
description: |
  تجربه بسیار خوبی داشتم. دکتر رضوی بسیار متخصص و مهربان بودند...
pros: "متخصص,مهربان,زمان‌بندی مناسب"
cons: "هزینه بالا"
date: 1702864800
```

## به‌روزرسانی نمایه جستجو

بعد از اضافه کردن پست‌های جدید، حتماً نمایه جستجو را به‌روزرسانی کنید:

1. به پوشه `admin-tools` بروید
2. دستور زیر را اجرا کنید:

```bash
npm run generate-search-index
```

این کار فایل `assets/search.json` را به‌روزرسانی می‌کند تا پست‌های جدید در نتایج جستجو نمایش داده شوند.

## نکات مهم

1. همیشه از خط تیره (-) به جای فاصله در `company_slug` استفاده کنید
2. ایمیل کاربران را هش کنید تا حریم خصوصی آن‌ها حفظ شود
3. تاریخ را به صورت timestamp ثبت کنید
4. برای جداسازی آیتم‌ها در قسمت مزایا و معایب از کاما استفاده کنید